{% extends "basecode.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold text-primary">
        <i class="bi bi-people-fill"></i> Editor Board Members
    </h1>
    <div class="d-flex align-items-center gap-2">

        <a href="{{ url_for('add_editor') }}" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> Add New
        </a>
    </div>
    
</div>
<div class="d-flex align-items-center gap-3">
    <!-- Filter Form -->
    <form method="get" action="{{ url_for('listedi') }}" class="d-flex gap-3 align-items-center">
        
        <!-- Journal Filter -->
        <div>
            <label for="journalFilter" class="form-label mb-1 fw-semibold">Filter by Journal</label>
            <select id="journalFilter" name="journal_id" class="form-select" style="width:200px;" onchange="this.form.submit()">
                <option value="all" {% if selected_journal == "all" or not selected_journal %}selected{% endif %}>All Journals</option>
                {% for j in journals %}
                    <option value="{{ j.journal_id }}" {% if selected_journal == j.journal_id %}selected{% endif %}>
                        {{ j.full_name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Category Filter -->
        <div>
            <label for="categoryFilter" class="form-label mb-1 fw-semibold">Filter by Category</label>
            <select id="categoryFilter" name="code" class="form-select" style="width:200px;" onchange="this.form.submit()">
                <option value="all" {% if selected_category == "all" or not selected_category %}selected{% endif %}>All Categories</option>
                <option value="01" {% if selected_category == "01" %}selected{% endif %}>Editorial Board</option>
                <option value="02" {% if selected_category == "02" %}selected{% endif %}>Reviewer Team</option>
            </select>
        </div>
    </form>
</div>

    <br>
<div class="table-responsive shadow-sm">
    <table class="table table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Journal</th>
                <th>Name</th>
                <th>Designation</th>
                <th>Link</th>
                <th>Quote</th>
                <th>Category</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for b in boards %}
            <tr>
                <td>{{ b.id }}</td>
                <td>{{ b.journal.full_name if b.journal else 'N/A' }}</td>
                <td class="fw-semibold">{{ b.name }}</td>
                <td>{{ b.designation }}</td>
                <td>
                    {% if b.link %}
                    <a href="{{ b.link }}" target="_blank" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-link-45deg"></i> Visit
                    </a>
                    {% else %}
                    <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td>{{ b.quote }}</td>
                <td>
                    {% if b.code == "01" %}
                        Editorial Board
                    {% elif b.code == "02" %}
                        Reviewer Team
                    {% else %}
                        {{ b.code }}
                    {% endif %}
                </td>

                <td class="text-center">
                    <div class="d-flex justify-content-center gap-2">
                        <a href="{{ url_for('edit_editor', id=b.id) }}" class="btn btn-sm btn-warning">
                            <i class="bi bi-pencil-square"></i> Edit
                        </a>
                        <a href="{{ url_for('delete_editor', id=b.id) }}" 
                           class="btn btn-sm btn-danger"
                           onclick="return confirm('Are you sure you want to delete this member?')">
                            <i class="bi bi-trash"></i> Delete
                        </a>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="8" class="text-center text-muted">No members found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
