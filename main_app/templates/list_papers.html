{% extends "basecode.html" %}
{% block title %}Research Papers{% endblock %}

{% block content %}
<style>
/* Table Card Wrapper */
.table-card {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    padding: 20px;
    margin-top: 20px;
}

/* Table Styling */
.table-card table {
    margin-bottom: 0;
}

.table-card th {
    background: linear-gradient(135deg, #283846 0%, #3a5168 100%);
    color: white;
    font-weight: 600;
}

.table-card td, .table-card th {
    vertical-align: middle;
}

.table-card .btn {
    font-size: 0.85rem;
}

/* Responsive Table Wrapper */
.table-responsive {
    overflow-x: auto;
}

/* Action Buttons Spacing */
.action-buttons .btn {
    margin-right: 5px;
    margin-bottom: 3px;
}

/* Alert */
.alert-info {
    margin-top: 20px;
}
</style>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Research Papers</h2>
  <a class="btn btn-primary" href="{{ url_for('add_paper') }}">Add Paper</a>
</div>

<div class="table-card table-responsive">
{% if papers %}
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>#</th>
        <th>Main Heading</th>
        <th>Title</th>
        <th>Authors</th>
        <th>Year</th>
        <th>PDF</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for p in papers %}
      <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.main_heading or '-' }}</td>
        <td>{{ p.title or '-' }}</td>
        <td>{{ p.authors or '-' }}</td>
        <td>{{ p.year or '-' }}</td>
        <td>
          {% if p.pdf_filename %}
            <a href="{{ url_for('download_pdf', paper_id=p.id) }}" class="btn btn-sm btn-outline-secondary">Download</a>
            <a target="_blank" href="{{ url_for('static', filename=('assets/pdf/' ~ p.pdf_filename)) }}" class="btn btn-sm btn-outline-info">View</a>
          {% else %}
            <span class="text-muted">-</span>
          {% endif %}
        </td>
        <td class="action-buttons">
          <a class="btn btn-sm btn-warning" href="{{ url_for('edit_paper', id=p.id) }}">Edit</a>
          <form method="POST" action="{{ url_for('delete_paper', id=p.id) }}" style="display:inline-block" onsubmit="return confirm('Delete this paper?');">
            <button class="btn btn-sm btn-danger" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="alert alert-info">No papers found.</div>
{% endif %}
</div>
{% endblock %}
